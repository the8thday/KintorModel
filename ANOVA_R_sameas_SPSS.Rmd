---
title: "ANOVA_R_sameas_SPSS"
author: "liuc"
date: '2022-03-18'
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## ANOVA_R_sameas_SPSS

http://www.statscanbefun.com/rblog/2015/8/27/ensuring-r-generates-the-same-anova-f-values-as-spss

https://medium.com/humansystemsdata/analysis-of-variance-showdown-r-vs-spss-f4e50234a94

he nature of the differences between SPSS and R becomes evident when there are an unequal number of participants across factorial ANOVA cells. There are a few simple steps that can be followed to ensure that R ANOVA values do indeed match those generated by SPSS. These steps involves using Type-III sums of squares for the ANOVA but there is more to it than that.


There are three things you need to do to ensure ANOVA F-values in R match those in SPSS. I will briefly list these three steps and then provide a more details description of each.

1. Set each independent variable as a factor
2. Set the default contrast to helmert
3. Conduct analysis using Type III Sums of Squares



```{r}
# We need to change the default contrast for unordered factors from "cont.treatment" to "contr.helmert". We do this with the command below

options(contrasts = c("contr.helmert", "contr.poly"))

df <- haven::read_sav('')

dd <- aov(Index ~ gender * education, data = df)
car::Anova(dd, type = 'III')
           
```

```{r}
# same as dd
crf.lm <- lm(formula = Index ~ gender * education, data = df)

car::Anova(crf.lm)


```










