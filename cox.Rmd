---
title: "cox regression"
author: "liuc"
date: "11/29/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## cox regression

```{r}
library(survival)
library(riskRegression)
library(gtsummary) # for beautiful table
```

建模

```{r}
lung <- na.omit(lung)
mod <- coxph(Surv(time, status)~age + sex + ph.ecog + ph.karno + pat.karno + meal.cal + wt.loss, 
             data = lung, 
             y=TRUE, 
             x = TRUE)
# 等比例风险假设

```

c-index以及校准曲线
c-index用于评估模型的区分度，可以理解为模型拟合后自身的

```{r}
xs=Score(list(Cox=mod),
         Surv(time,status)~1,
         data=lung,
         plots="cal",
         metrics=NULL)
plotCalibration(xs, cens.method="local")
```
ROC
```{r}


```

Landmark分析：如果随访的不同时间段间基础风险发生变化，需要分时间段分别分析

```{r}

```

列线图的绘制

```{r}

```




